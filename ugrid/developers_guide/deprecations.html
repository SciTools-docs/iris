

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Deprecations &mdash; Iris 3.0.0ugrid1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/theme_override.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-dataframe.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Releases" href="release.html" />
    <link rel="prev" title="Testing" href="tests.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/iris-logo-title.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
    
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installing.html">Installing Iris</a></li>
<li class="toctree-l1"><a class="reference internal" href="../generated/gallery/index.html">Gallery</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userguide/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/iris_cubes.html">Iris data structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/loading_iris_cubes.html">Loading Iris cubes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/saving_iris_cubes.html">Saving Iris cubes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/navigating_a_cube.html">Navigating a cube</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/subsetting_a_cube.html">Subsetting a Cube</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/real_and_lazy_data.html">Real and Lazy Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/plotting_a_cube.html">Plotting a cube</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/interpolation_and_regridding.html">Cube interpolation and regridding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/merge_and_concat.html">Merge and concatenate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/cube_statistics.html">Cube statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/cube_maths.html">Basic cube mathematics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/citation.html">Citing Iris</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/code_maintenance.html">Code maintenance</a></li>
</ul>
<p class="caption"><span class="caption-text">Developers Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="contributing_documentation.html">Contributing to the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="documenting/index.html">Documentation in Iris</a></li>
<li class="toctree-l1"><a class="reference internal" href="gitwash/index.html">Working with <em>iris</em> source code</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_format.html">Code formatting</a></li>
<li class="toctree-l1"><a class="reference internal" href="pulls.html">Pull request check List</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">Testing</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Deprecations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#adding-a-deprecation">Adding a deprecation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#removing-a-public-api">Removing a public API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#changing-a-default">Changing a default</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#removing-a-deprecation">Removing a deprecation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">Removing a public API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#iris-developer-future">Changing a default</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="release.html">Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../generated/api/iris.html">Iris API</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew/index.html">What’s new in Iris</a></li>
<li class="toctree-l1"><a class="reference internal" href="../techpapers/index.html">Iris Technical Papers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">Iris copyright, licensing and contributors</a></li>
</ul>

            
          

    
    
    
        <p class="caption">
            <span class="caption-text">
            
                Support
            
            </span>
        </p>
        <ul>
            
                <li class="toctree-l1"><a href="https://github.com/SciTools/iris"><i class="fa fa-github fa-fw"></i> Source Code</a></li>
            
                <li class="toctree-l1"><a href="https://groups.google.com/forum/#!forum/scitools-iris"><i class="fa fa-comments fa-fw"></i> Users Google Group</a></li>
            
                <li class="toctree-l1"><a href="https://groups.google.com/forum/#!forum/scitools-iris-dev"><i class="fa fa-comments fa-fw"></i> Developers Google Group</a></li>
            
                <li class="toctree-l1"><a href="https://stackoverflow.com/questions/tagged/python-iris"><i class="fa fa-question fa-fw"></i> StackOverflow For "How do I?"</a></li>
            
                <li class="toctree-l1"><a href="https://scitools.org.uk/iris/docs/v2.4.0/index.html"><i class="fa fa-book fa-fw"></i> Legacy documentation</a></li>
            
        </ul>
    

        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Iris</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Deprecations</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/developers_guide/deprecations.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="deprecations">
<span id="iris-development-deprecations"></span><h1>Deprecations<a class="headerlink" href="#deprecations" title="Permalink to this headline">¶</a></h1>
<p>If you need to make a backwards-incompatible change to a public API
<a class="footnote-reference brackets" href="#public-api" id="id1">1</a> that has been included in a release (e.g. deleting a
method), then you must first deprecate the old behaviour in at least
one release, before removing/updating it in the next
<a class="reference external" href="http://semver.org/">major release</a>.</p>
<div class="section" id="adding-a-deprecation">
<h2>Adding a deprecation<a class="headerlink" href="#adding-a-deprecation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="removing-a-public-api">
<span id="id2"></span><h3>Removing a public API<a class="headerlink" href="#removing-a-public-api" title="Permalink to this headline">¶</a></h3>
<p>The simplest form of deprecation occurs when you need to remove a public
API. The public API in question is deprecated for a period before it is
removed to allow time for user code to be updated. Sometimes the
deprecation is accompanied by the introduction of a new public API.</p>
<p>Under these circumstances the following points apply:</p>
<blockquote>
<div><ul>
<li><p>Using the deprecated API must result in a concise deprecation warning which
is an instance of <a class="reference internal" href="../generated/api/iris.html#iris.IrisDeprecation" title="iris.IrisDeprecation"><code class="xref py py-class docutils literal notranslate"><span class="pre">iris.IrisDeprecation</span></code></a>.
It is easiest to call
<code class="xref py py-func docutils literal notranslate"><span class="pre">iris._deprecation.warn_deprecated()</span></code>, which is a
simple wrapper to <a class="reference external" href="https://docs.python.org/2.7/library/warnings.html#warnings.warn" title="(in Python v2.7)"><code class="xref py py-func docutils literal notranslate"><span class="pre">warnings.warn()</span></code></a> with the signature
<cite>warn_deprecation(message, **kwargs)</cite>.</p></li>
<li><p>Where possible, your deprecation warning should include advice on
how to avoid using the deprecated API. For example, you might
reference a preferred API, or more detailed documentation elsewhere.</p></li>
<li><p>You must update the docstring for the deprecated API to include a
Sphinx deprecation directive:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">deprecated::</span> <span class="pre">&lt;VERSION&gt;</span></code></p>
</div></blockquote>
<p>where you should replace <cite>&lt;VERSION&gt;</cite> with the major and minor version
of Iris in which this API is first deprecated. For example: <cite>1.8</cite>.</p>
<p>As with the deprecation warning, you should include advice on how to
avoid using the deprecated API within the content of this directive.
Feel free to include more detail in the updated docstring than in the
deprecation warning.</p>
</li>
<li><p>You should check the documentation for references to the deprecated
API and update them as appropriate.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="changing-a-default">
<h3>Changing a default<a class="headerlink" href="#changing-a-default" title="Permalink to this headline">¶</a></h3>
<p>When you need to change the default behaviour of a public API the
situation is slightly more complex. The recommended solution is to use
the <a class="reference internal" href="../generated/api/iris.html#iris.FUTURE" title="iris.FUTURE"><code class="xref py py-data docutils literal notranslate"><span class="pre">iris.FUTURE</span></code></a> object. The <a class="reference internal" href="../generated/api/iris.html#iris.FUTURE" title="iris.FUTURE"><code class="xref py py-data docutils literal notranslate"><span class="pre">iris.FUTURE</span></code></a> object provides
boolean attributes that allow user code to control at run-time the
default behaviour of corresponding public APIs. When a boolean attribute
is set to <cite>False</cite> it causes the corresponding public API to use its
deprecated default behaviour. When a boolean attribute is set to <cite>True</cite>
it causes the corresponding public API to use its new default behaviour.</p>
<p>The following points apply in addition to those for removing a public
API:</p>
<blockquote>
<div><ul class="simple">
<li><p>You should add a new boolean attribute to <a class="reference internal" href="../generated/api/iris.html#iris.FUTURE" title="iris.FUTURE"><code class="xref py py-data docutils literal notranslate"><span class="pre">iris.FUTURE</span></code></a> (by
modifying <a class="reference internal" href="../generated/api/iris.html#iris.Future" title="iris.Future"><code class="xref py py-class docutils literal notranslate"><span class="pre">iris.Future</span></code></a>) that controls the default behaviour
of the public API that needs updating. The initial state of the new
boolean attribute should be <cite>False</cite>. You should name the new boolean
attribute to indicate that setting it to <cite>True</cite> will select the new
default behaviour.</p></li>
<li><p>You should include a reference to this <a class="reference internal" href="../generated/api/iris.html#iris.FUTURE" title="iris.FUTURE"><code class="xref py py-data docutils literal notranslate"><span class="pre">iris.FUTURE</span></code></a> flag in your
deprecation warning and corresponding Sphinx deprecation directive.</p></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="removing-a-deprecation">
<h2>Removing a deprecation<a class="headerlink" href="#removing-a-deprecation" title="Permalink to this headline">¶</a></h2>
<p>When the time comes to make a new major release you should locate any
deprecated APIs within the code that satisfy the one release
minimum period described previously. Locating deprecated APIs can easily
be done by searching for the Sphinx deprecation directives and/or
deprecation warnings.</p>
<div class="section" id="id3">
<h3>Removing a public API<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>The deprecated API should be removed and any corresponding documentation
and/or example code should be removed/updated as appropriate.</p>
</div>
<div class="section" id="iris-developer-future">
<span id="id4"></span><h3>Changing a default<a class="headerlink" href="#iris-developer-future" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p>You should update the initial state of the relevant boolean attribute
of <a class="reference internal" href="../generated/api/iris.html#iris.FUTURE" title="iris.FUTURE"><code class="xref py py-data docutils literal notranslate"><span class="pre">iris.FUTURE</span></code></a> to <cite>True</cite>.</p></li>
<li><p>You should deprecate setting the relevant boolean attribute of
<a class="reference internal" href="../generated/api/iris.html#iris.Future" title="iris.Future"><code class="xref py py-class docutils literal notranslate"><span class="pre">iris.Future</span></code></a> in the same way as described in
<a class="reference internal" href="#removing-a-public-api"><span class="std std-ref">Removing a public API</span></a>.</p></li>
</ul>
</div></blockquote>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="public-api"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>A name without a leading underscore in any of its
components, with the exception of the <a class="reference internal" href="../generated/api/iris/experimental.html#module-iris.experimental" title="iris.experimental"><code class="xref py py-mod docutils literal notranslate"><span class="pre">iris.experimental</span></code></a> and
<code class="xref py py-mod docutils literal notranslate"><span class="pre">iris.tests</span></code> packages.</p>
<dl class="simple">
<dt>Example public names are:</dt><dd><ul class="simple">
<li><p><cite>iris.this.</cite></p></li>
<li><p><cite>iris.this.that</cite></p></li>
</ul>
</dd>
<dt>Example private names are:</dt><dd><ul class="simple">
<li><p><cite>iris._this</cite></p></li>
<li><p><cite>iris.this._that</cite></p></li>
<li><p><cite>iris._this.that</cite></p></li>
<li><p><cite>iris._this._that</cite></p></li>
<li><p><cite>iris.experimental.something</cite></p></li>
<li><p><cite>iris.tests.get_data_path</cite></p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="release.html" class="btn btn-neutral float-right" title="Releases" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tests.html" class="btn btn-neutral float-left" title="Testing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        
        &copy; <a href="../copyright.html">Copyright</a> Iris contributors

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>