

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Loading Iris cubes &mdash; Iris 3.0.dev0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/theme_override.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-dataframe.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Saving Iris cubes" href="saving_iris_cubes.html" />
    <link rel="prev" title="Iris data structures" href="iris_cubes.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/iris-logo-title.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
    
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installing.html">Installing Iris</a></li>
<li class="toctree-l1"><a class="reference internal" href="../generated/gallery/index.html">Gallery</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="iris_cubes.html">Iris data structures</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Loading Iris cubes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#loading-multiple-files">Loading multiple files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#lazy-loading">Lazy loading</a></li>
<li class="toctree-l2"><a class="reference internal" href="#constrained-loading">Constrained loading</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#constraining-a-circular-coordinate-across-its-boundary">Constraining a circular coordinate across its boundary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#constraining-on-time">Constraining on Time</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#strict-loading">Strict loading</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="saving_iris_cubes.html">Saving Iris cubes</a></li>
<li class="toctree-l1"><a class="reference internal" href="navigating_a_cube.html">Navigating a cube</a></li>
<li class="toctree-l1"><a class="reference internal" href="subsetting_a_cube.html">Subsetting a Cube</a></li>
<li class="toctree-l1"><a class="reference internal" href="real_and_lazy_data.html">Real and Lazy Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotting_a_cube.html">Plotting a cube</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolation_and_regridding.html">Cube interpolation and regridding</a></li>
<li class="toctree-l1"><a class="reference internal" href="merge_and_concat.html">Merge and concatenate</a></li>
<li class="toctree-l1"><a class="reference internal" href="cube_statistics.html">Cube statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="cube_maths.html">Basic cube mathematics</a></li>
<li class="toctree-l1"><a class="reference internal" href="citation.html">Citing Iris</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_maintenance.html">Code maintenance</a></li>
</ul>
<p class="caption"><span class="caption-text">Developers Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developers_guide/contributing_documentation.html">Contributing to the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers_guide/documenting/index.html">Documentation in Iris</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers_guide/gitwash/index.html">Working with <em>iris</em> source code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers_guide/code_format.html">Code formatting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers_guide/pulls.html">Pull request check list</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers_guide/tests.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers_guide/deprecations.html">Deprecations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers_guide/release.html">Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../generated/api/iris.html">Iris API</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew/index.html">What’s new in Iris</a></li>
<li class="toctree-l1"><a class="reference internal" href="../techpapers/index.html">Iris Technical Papers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">Iris copyright, licensing and contributors</a></li>
</ul>

            
          

    
    
    
        <p class="caption">
            <span class="caption-text">
            
                Support
            
            </span>
        </p>
        <ul>
            
                <li class="toctree-l1"><a href="https://github.com/SciTools/iris"><i class="fa fa-github fa-fw"></i> Source Code</a></li>
            
                <li class="toctree-l1"><a href="https://groups.google.com/forum/#!forum/scitools-iris"><i class="fa fa-comments fa-fw"></i> Users Google Group</a></li>
            
                <li class="toctree-l1"><a href="https://groups.google.com/forum/#!forum/scitools-iris-dev"><i class="fa fa-comments fa-fw"></i> Developers Google Group</a></li>
            
                <li class="toctree-l1"><a href="https://stackoverflow.com/questions/tagged/python-iris"><i class="fa fa-question fa-fw"></i> StackOverflow For "How do I?"</a></li>
            
                <li class="toctree-l1"><a href="https://scitools.org.uk/iris/docs/v2.4.0/index.html"><i class="fa fa-book fa-fw"></i> Legacy documentation</a></li>
            
        </ul>
    

        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Iris</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Loading Iris cubes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/userguide/loading_iris_cubes.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="loading-iris-cubes">
<span id="id1"></span><h1>Loading Iris cubes<a class="headerlink" href="#loading-iris-cubes" title="Permalink to this headline">¶</a></h1>
<p>To load a single file into a <strong>list</strong> of Iris cubes
the <a class="reference internal" href="../generated/api/iris.html#iris.load" title="iris.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.load()</span></code></a> function is used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">iris</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;/path/to/file&#39;</span>
<span class="n">cubes</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</pre></div>
</div>
<p>Iris will attempt to return <strong>as few cubes as possible</strong>
by collecting together multiple fields with a shared standard name
into a single multidimensional cube.</p>
<p>The <a class="reference internal" href="../generated/api/iris.html#iris.load" title="iris.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.load()</span></code></a> function automatically recognises the format
of the given files and attempts to produce Iris Cubes from their contents.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently there is support for CF NetCDF, GRIB 1 &amp; 2, PP and FieldsFiles
file formats with a framework for this to be extended to custom formats.</p>
</div>
<p>In order to find out what has been loaded, the result can be printed:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">iris</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filename</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">sample_data_path</span><span class="p">(</span><span class="s1">&#39;uk_hires.pp&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cubes</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">cubes</span><span class="p">)</span>
<span class="go">0: air_potential_temperature / (K)     (time: 3; model_level_number: 7; grid_latitude: 204; grid_longitude: 187)</span>
<span class="go">1: surface_altitude / (m)              (grid_latitude: 204; grid_longitude: 187)</span>
</pre></div>
</div>
<p>This shows that there were 2 cubes as a result of loading the file, they were:
<code class="docutils literal notranslate"><span class="pre">air_potential_temperature</span></code> and <code class="docutils literal notranslate"><span class="pre">surface_altitude</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">surface_altitude</span></code> cube was 2 dimensional with:</p>
<blockquote>
<div><ul class="simple">
<li><p>the two dimensions have extents of 204 and 187 respectively and are
represented by the <code class="docutils literal notranslate"><span class="pre">grid_latitude</span></code> and <code class="docutils literal notranslate"><span class="pre">grid_longitude</span></code> coordinates.</p></li>
</ul>
</div></blockquote>
<p>The <code class="docutils literal notranslate"><span class="pre">air_potential_temperature</span></code> cubes were 4 dimensional with:</p>
<blockquote>
<div><ul class="simple">
<li><p>the same length <code class="docutils literal notranslate"><span class="pre">grid_latitude</span></code> and <code class="docutils literal notranslate"><span class="pre">grid_longitude</span></code> dimensions as
<code class="docutils literal notranslate"><span class="pre">surface_altitide</span></code></p></li>
<li><p>a <code class="docutils literal notranslate"><span class="pre">time</span></code> dimension of length 3</p></li>
<li><p>a <code class="docutils literal notranslate"><span class="pre">model_level_number</span></code> dimension of length 7</p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The result of <a class="reference internal" href="../generated/api/iris.html#iris.load" title="iris.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.load()</span></code></a> is <strong>always</strong> a
<a class="reference internal" href="../generated/api/iris/cube.html#iris.cube.CubeList" title="iris.cube.CubeList"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span> <span class="pre">of</span> <span class="pre">cubes</span></code></a>.
Anything that can be done with a Python <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code> can be done
with the resultant list of cubes. It is worth noting, however, that
there is no inherent order to this
<a class="reference internal" href="../generated/api/iris/cube.html#iris.cube.CubeList" title="iris.cube.CubeList"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span> <span class="pre">of</span> <span class="pre">cubes</span></code></a>.
Because of this, indexing may be inconsistent. A more consistent way to
extract a cube is by using the <a class="reference internal" href="../generated/api/iris.html#iris.Constraint" title="iris.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">iris.Constraint</span></code></a> class as
described in <a class="reference internal" href="#constrained-loading"><span class="std std-ref">Constrained loading</span></a>.</p>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Throughout this user guide you will see the function
<code class="docutils literal notranslate"><span class="pre">iris.sample_data_path</span></code> being used to get the filename for the resources
used in the examples. The result of this function is just a string.</p>
<p>Using this function allows us to provide examples which will work
across platforms and with data installed in different locations,
however in practice you will want to use your own strings:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;/path/to/file&#39;</span>
<span class="n">cubes</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>To get the air potential temperature cube from the list of cubes
returned by <a class="reference internal" href="../generated/api/iris.html#iris.load" title="iris.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.load()</span></code></a> in the previous example,
list indexing can be used:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">iris</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filename</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">sample_data_path</span><span class="p">(</span><span class="s1">&#39;uk_hires.pp&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cubes</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># get the first cube (list indexing is 0 based)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">air_potential_temperature</span> <span class="o">=</span> <span class="n">cubes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">air_potential_temperature</span><span class="p">)</span>
<span class="go">air_potential_temperature / (K)     (time: 3; model_level_number: 7; grid_latitude: 204; grid_longitude: 187)</span>
<span class="go">     Dimension coordinates:</span>
<span class="go">          time                           x                      -                 -                    -</span>
<span class="go">          model_level_number             -                      x                 -                    -</span>
<span class="go">          grid_latitude                  -                      -                 x                    -</span>
<span class="go">          grid_longitude                 -                      -                 -                    x</span>
<span class="go">     Auxiliary coordinates:</span>
<span class="go">          forecast_period                x                      -                 -                    -</span>
<span class="go">          level_height                   -                      x                 -                    -</span>
<span class="go">          sigma                          -                      x                 -                    -</span>
<span class="go">          surface_altitude               -                      -                 x                    x</span>
<span class="go">     Derived coordinates:</span>
<span class="go">          altitude                       -                      x                 x                    x</span>
<span class="go">     Scalar coordinates:</span>
<span class="go">          forecast_reference_time: 2009-11-19 04:00:00</span>
<span class="go">     Attributes:</span>
<span class="go">          STASH: m01s00i004</span>
<span class="go">          source: Data from Met Office Unified Model</span>
<span class="go">          um_version: 7.3</span>
</pre></div>
</div>
<p>Notice that the result of printing a <strong>cube</strong> is a little more verbose than
it was when printing a <strong>list of cubes</strong>. In addition to the very short summary
which is provided when printing a list of cubes, information is provided
on the coordinates which constitute the cube in question.
This was the output discussed at the end of the <a class="reference internal" href="iris_cubes.html"><span class="doc">Iris data structures</span></a> section.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Dimensioned coordinates will have a dimension marker <code class="docutils literal notranslate"><span class="pre">x</span></code> in the
appropriate column for each cube data dimension that they describe.</p>
</div>
<div class="section" id="loading-multiple-files">
<h2>Loading multiple files<a class="headerlink" href="#loading-multiple-files" title="Permalink to this headline">¶</a></h2>
<p>To load more than one file into a list of cubes, a list of filenames can be
provided to <a class="reference internal" href="../generated/api/iris.html#iris.load" title="iris.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.load()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">filenames</span> <span class="o">=</span> <span class="p">[</span><span class="n">iris</span><span class="o">.</span><span class="n">sample_data_path</span><span class="p">(</span><span class="s1">&#39;uk_hires.pp&#39;</span><span class="p">),</span>
             <span class="n">iris</span><span class="o">.</span><span class="n">sample_data_path</span><span class="p">(</span><span class="s1">&#39;air_temp.pp&#39;</span><span class="p">)]</span>
<span class="n">cubes</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filenames</span><span class="p">)</span>
</pre></div>
</div>
<p>It is also possible to load one or more files with wildcard substitution
using the expansion rules defined <a class="reference external" href="https://docs.python.org/2.7/library/fnmatch.html#module-fnmatch" title="(in Python v2.7)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">fnmatch</span></code></a>.</p>
<p>For example, to match <strong>zero or more characters</strong> in the filename,
star wildcards can be used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">filename</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">sample_data_path</span><span class="p">(</span><span class="s1">&#39;GloSea4&#39;</span><span class="p">,</span> <span class="s1">&#39;*.pp&#39;</span><span class="p">)</span>
<span class="n">cubes</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The cubes returned will not necessarily be in the same order as the
order of the filenames.</p>
</div>
</div>
<div class="section" id="lazy-loading">
<h2>Lazy loading<a class="headerlink" href="#lazy-loading" title="Permalink to this headline">¶</a></h2>
<p>In fact when Iris loads data from most file types, it normally only reads the
essential descriptive information or metadata :  the bulk of the actual data
content will only be loaded later, as it is needed.
This is referred to as ‘lazy’ data.  It allows loading to be much quicker, and to occupy less memory.</p>
<p>For more on the benefits, handling and uses of lazy data, see <a class="reference internal" href="real_and_lazy_data.html"><span class="doc">Real and Lazy Data</span></a>.</p>
</div>
<div class="section" id="constrained-loading">
<span id="id2"></span><h2>Constrained loading<a class="headerlink" href="#constrained-loading" title="Permalink to this headline">¶</a></h2>
<p>Given a large dataset, it is possible to restrict or constrain the load
to match specific Iris cube metadata.
Constrained loading provides the ability to generate a cube
from a specific subset of data that is of particular interest.</p>
<p>As we have seen, loading the following file creates several Cubes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">filename</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">sample_data_path</span><span class="p">(</span><span class="s1">&#39;uk_hires.pp&#39;</span><span class="p">)</span>
<span class="n">cubes</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</pre></div>
</div>
<p>Specifying a name as a constraint argument to <a class="reference internal" href="../generated/api/iris.html#iris.load" title="iris.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.load()</span></code></a> will mean
only cubes with matching <code class="xref py py-meth docutils literal notranslate"><span class="pre">name</span></code>
will be returned:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">filename</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">sample_data_path</span><span class="p">(</span><span class="s1">&#39;uk_hires.pp&#39;</span><span class="p">)</span>
<span class="n">cubes</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;surface_altitude&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that, the provided name will match against either the standard name,
long name, NetCDF variable name or STASH metadata of a cube. Therefore, the
previous example using the <code class="docutils literal notranslate"><span class="pre">surface_altitude</span></code> standard name constraint can
also be achieved using the STASH value of <code class="docutils literal notranslate"><span class="pre">m01s00i033</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">filename</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">sample_data_path</span><span class="p">(</span><span class="s1">&#39;uk_hires.pp&#39;</span><span class="p">)</span>
<span class="n">cubes</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;m01s00i033&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If further specific name constraint control is required i.e., to constrain
against a combination of standard name, long name, NetCDF variable name and/or
STASH metadata, consider using the <a class="reference internal" href="../generated/api/iris.html#iris.NameConstraint" title="iris.NameConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">iris.NameConstraint</span></code></a>. For example,
to constrain against both a standard name of <code class="docutils literal notranslate"><span class="pre">surface_altitude</span></code> <strong>and</strong> a STASH
of <code class="docutils literal notranslate"><span class="pre">m01s00i033</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">filename</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">sample_data_path</span><span class="p">(</span><span class="s1">&#39;uk_hires.pp&#39;</span><span class="p">)</span>
<span class="n">constraint</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">NameConstraint</span><span class="p">(</span><span class="n">standard_name</span><span class="o">=</span><span class="s1">&#39;surface_altitude&#39;</span><span class="p">,</span> <span class="n">STASH</span><span class="o">=</span><span class="s1">&#39;m01s00i033&#39;</span><span class="p">)</span>
<span class="n">cubes</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">constraint</span><span class="p">)</span>
</pre></div>
</div>
<p>To constrain the load to multiple distinct constraints, a list of constraints
can be provided.  This is equivalent to running load once for each constraint
but is likely to be more efficient:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">filename</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">sample_data_path</span><span class="p">(</span><span class="s1">&#39;uk_hires.pp&#39;</span><span class="p">)</span>
<span class="n">cubes</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;air_potential_temperature&#39;</span><span class="p">,</span> <span class="s1">&#39;surface_altitude&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="../generated/api/iris.html#iris.Constraint" title="iris.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">iris.Constraint</span></code></a> class can be used to restrict coordinate values
on load. For example, to constrain the load to match
a specific <code class="docutils literal notranslate"><span class="pre">model_level_number</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">filename</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">sample_data_path</span><span class="p">(</span><span class="s1">&#39;uk_hires.pp&#39;</span><span class="p">)</span>
<span class="n">level_10</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">model_level_number</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">cubes</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">level_10</span><span class="p">)</span>
</pre></div>
</div>
<p>Constraints can be combined using <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> to represent a more restrictive
constraint to <code class="docutils literal notranslate"><span class="pre">load</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">filename</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">sample_data_path</span><span class="p">(</span><span class="s1">&#39;uk_hires.pp&#39;</span><span class="p">)</span>
<span class="n">forecast_6</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">forecast_period</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="n">level_10</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">model_level_number</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">cubes</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">forecast_6</span> <span class="o">&amp;</span> <span class="n">level_10</span><span class="p">)</span>
</pre></div>
</div>
<p>As well as being able to combine constraints using <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>,
the <a class="reference internal" href="../generated/api/iris.html#iris.Constraint" title="iris.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">iris.Constraint</span></code></a> class can accept multiple arguments,
and a list of values can be given to constrain a coordinate to one of
a collection of values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">filename</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">sample_data_path</span><span class="p">(</span><span class="s1">&#39;uk_hires.pp&#39;</span><span class="p">)</span>
<span class="n">level_10_or_16_fp_6</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">model_level_number</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">16</span><span class="p">],</span> <span class="n">forecast_period</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="n">cubes</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">level_10_or_16_fp_6</span><span class="p">)</span>
</pre></div>
</div>
<p>A common requirement is to limit the value of a coordinate to a specific range,
this can be achieved by passing the constraint a function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">bottom_16_levels</span><span class="p">(</span><span class="n">cell</span><span class="p">):</span>
   <span class="c1"># return True or False as to whether the cell in question should be kept</span>
   <span class="k">return</span> <span class="n">cell</span> <span class="o">&lt;=</span> <span class="mi">16</span>

<span class="n">filename</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">sample_data_path</span><span class="p">(</span><span class="s1">&#39;uk_hires.pp&#39;</span><span class="p">)</span>
<span class="n">level_lt_16</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">model_level_number</span><span class="o">=</span><span class="n">bottom_16_levels</span><span class="p">)</span>
<span class="n">cubes</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">level_lt_16</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As with many of the examples later in this documentation, the
simple function above can be conveniently written as a lambda function
on a single line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bottom_16_levels</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">cell</span><span class="p">:</span> <span class="n">cell</span> <span class="o">&lt;=</span> <span class="mi">16</span>
</pre></div>
</div>
</div>
<p>Note also the <a class="reference internal" href="subsetting_a_cube.html#floating-point-warning"><span class="std std-ref">warning on equality constraints with floating point coordinates</span></a>.</p>
<p>Cube attributes can also be part of the constraint criteria. Supposing a
cube attribute of <code class="docutils literal notranslate"><span class="pre">STASH</span></code> existed, as is the case when loading <code class="docutils literal notranslate"><span class="pre">PP</span></code> files,
then specific STASH codes can be filtered:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">filename</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">sample_data_path</span><span class="p">(</span><span class="s1">&#39;uk_hires.pp&#39;</span><span class="p">)</span>
<span class="n">level_10_with_stash</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">AttributeConstraint</span><span class="p">(</span><span class="n">STASH</span><span class="o">=</span><span class="s1">&#39;m01s00i004&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">iris</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">model_level_number</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">cubes</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">level_10_with_stash</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>For advanced usage there are further examples in the
<a class="reference internal" href="../generated/api/iris.html#iris.Constraint" title="iris.Constraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">iris.Constraint</span></code></a> reference documentation.</p>
</div>
<div class="section" id="constraining-a-circular-coordinate-across-its-boundary">
<h3>Constraining a circular coordinate across its boundary<a class="headerlink" href="#constraining-a-circular-coordinate-across-its-boundary" title="Permalink to this headline">¶</a></h3>
<p>Occasionally you may need to constrain your cube with a region that crosses the
boundary of a circular coordinate (this is often the meridian or the dateline /
antimeridian). An example use-case of this is to extract the entire Pacific Ocean
from a cube whose longitudes are bounded by the dateline.</p>
<p>This functionality cannot be provided reliably using constraints. Instead you should use the
functionality provided by <a class="reference internal" href="../generated/api/iris/cube.html#iris.cube.Cube.intersection" title="iris.cube.Cube.intersection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cube.intersection</span></code></a>
to extract this region.</p>
</div>
<div class="section" id="constraining-on-time">
<span id="using-time-constraints"></span><h3>Constraining on Time<a class="headerlink" href="#constraining-on-time" title="Permalink to this headline">¶</a></h3>
<p>Iris follows NetCDF-CF rules in representing time coordinate values as normalised,
purely numeric, values which are normalised by the calendar specified in the coordinate’s
units (e.g. “days since 1970-01-01”).
However, when constraining by time we usually want to test calendar-related
aspects such as hours of the day or months of the year, so Iris
provides special features to facilitate this:</p>
<p>Firstly, when Iris evaluates Constraint expressions, it will convert time-coordinate
values (points and bounds) from numbers into <a class="reference external" href="https://docs.python.org/2.7/library/datetime.html#datetime.datetime" title="(in Python v2.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a>-like objects
for ease of calendar-based testing.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">filename</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">sample_data_path</span><span class="p">(</span><span class="s1">&#39;uk_hires.pp&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cube_all</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load_cube</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;air_potential_temperature&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;All times :</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">cube_all</span><span class="o">.</span><span class="n">coord</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">)))</span>
<span class="go">All times :</span>
<span class="go">DimCoord([2009-11-19 10:00:00, 2009-11-19 11:00:00, 2009-11-19 12:00:00], standard_name=&#39;time&#39;, calendar=&#39;gregorian&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define a function which accepts a datetime as its argument (this is simplified in later examples).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hour_11</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="k">lambda</span> <span class="n">cell</span><span class="p">:</span> <span class="n">cell</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">hour</span> <span class="o">==</span> <span class="mi">11</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cube_11</span> <span class="o">=</span> <span class="n">cube_all</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="n">hour_11</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Selected times :</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">cube_11</span><span class="o">.</span><span class="n">coord</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">)))</span>
<span class="go">Selected times :</span>
<span class="go">DimCoord([2009-11-19 11:00:00], standard_name=&#39;time&#39;, calendar=&#39;gregorian&#39;)</span>
</pre></div>
</div>
<p>Secondly, the <a class="reference internal" href="../generated/api/iris/time.html#module-iris.time" title="iris.time"><code class="xref py py-class docutils literal notranslate"><span class="pre">iris.time</span></code></a> module provides flexible time comparison
facilities.  An <a class="reference internal" href="../generated/api/iris/time.html#iris.time.PartialDateTime" title="iris.time.PartialDateTime"><code class="xref py py-class docutils literal notranslate"><span class="pre">iris.time.PartialDateTime</span></code></a> object can be compared to
objects such as <a class="reference external" href="https://docs.python.org/2.7/library/datetime.html#datetime.datetime" title="(in Python v2.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.datetime</span></code></a> instances, and this comparison will
then test only those ‘aspects’ which the PartialDateTime instance defines:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">iris.time</span> <span class="kn">import</span> <span class="n">PartialDateTime</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dt</span> <span class="o">&gt;</span> <span class="n">PartialDateTime</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2010</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">6</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dt</span> <span class="o">&gt;</span> <span class="n">PartialDateTime</span><span class="p">(</span><span class="n">month</span><span class="o">=</span><span class="mi">6</span><span class="p">))</span>
<span class="go">False</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>These two facilities can be combined to provide straightforward calendar-based
time selections when loading or extracting data.</p>
<p>The previous constraint example can now be written as:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">the_11th_hour</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">iris</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">PartialDateTime</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">11</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">iris</span><span class="o">.</span><span class="n">load_cube</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">iris</span><span class="o">.</span><span class="n">sample_data_path</span><span class="p">(</span><span class="s1">&#39;uk_hires.pp&#39;</span><span class="p">),</span>
<span class="gp">... </span>   <span class="s1">&#39;air_potential_temperature&#39;</span> <span class="o">&amp;</span> <span class="n">the_11th_hour</span><span class="p">)</span><span class="o">.</span><span class="n">coord</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">))</span>
<span class="go">DimCoord([2009-11-19 11:00:00], standard_name=&#39;time&#39;, calendar=&#39;gregorian&#39;)</span>
</pre></div>
</div>
<p>It is common that a cube will need to be constrained between two given dates.
In the following example we construct a time sequence representing the first
day of every week for many years:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">long_ts</span><span class="o">.</span><span class="n">coord</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">))</span>
<span class="go">DimCoord([2007-04-09 00:00:00, 2007-04-16 00:00:00, 2007-04-23 00:00:00,</span>
<span class="go">          ...</span>
<span class="go">          2010-02-01 00:00:00, 2010-02-08 00:00:00, 2010-02-15 00:00:00],</span>
<span class="go">         standard_name=&#39;time&#39;, calendar=&#39;gregorian&#39;)</span>
</pre></div>
</div>
<p>Given two dates in datetime format, we can select all points between them.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d1</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="s1">&#39;20070715T0000Z&#39;</span><span class="p">,</span> <span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">T%H%MZ&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d2</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="s1">&#39;20070825T0000Z&#39;</span><span class="p">,</span> <span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">T%H%MZ&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st_swithuns_daterange_07</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">time</span><span class="o">=</span><span class="k">lambda</span> <span class="n">cell</span><span class="p">:</span> <span class="n">d1</span> <span class="o">&lt;=</span> <span class="n">cell</span><span class="o">.</span><span class="n">point</span> <span class="o">&lt;</span> <span class="n">d2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">within_st_swithuns_07</span> <span class="o">=</span> <span class="n">long_ts</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="n">st_swithuns_daterange_07</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">within_st_swithuns_07</span><span class="o">.</span><span class="n">coord</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">))</span>
<span class="go">DimCoord([2007-07-16 00:00:00, 2007-07-23 00:00:00, 2007-07-30 00:00:00,</span>
<span class="go">          2007-08-06 00:00:00, 2007-08-13 00:00:00, 2007-08-20 00:00:00],</span>
<span class="go">         standard_name=&#39;time&#39;, calendar=&#39;gregorian&#39;)</span>
</pre></div>
</div>
<p>Alternatively, we may rewrite this using <a class="reference internal" href="../generated/api/iris/time.html#iris.time.PartialDateTime" title="iris.time.PartialDateTime"><code class="xref py py-class docutils literal notranslate"><span class="pre">iris.time.PartialDateTime</span></code></a>
objects.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pdt1</span> <span class="o">=</span> <span class="n">PartialDateTime</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2007</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pdt2</span> <span class="o">=</span> <span class="n">PartialDateTime</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2007</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st_swithuns_daterange_07</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">time</span><span class="o">=</span><span class="k">lambda</span> <span class="n">cell</span><span class="p">:</span> <span class="n">pdt1</span> <span class="o">&lt;=</span> <span class="n">cell</span><span class="o">.</span><span class="n">point</span> <span class="o">&lt;</span> <span class="n">pdt2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">within_st_swithuns_07</span> <span class="o">=</span> <span class="n">long_ts</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="n">st_swithuns_daterange_07</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">within_st_swithuns_07</span><span class="o">.</span><span class="n">coord</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">))</span>
<span class="go">DimCoord([2007-07-16 00:00:00, 2007-07-23 00:00:00, 2007-07-30 00:00:00,</span>
<span class="go">          2007-08-06 00:00:00, 2007-08-13 00:00:00, 2007-08-20 00:00:00],</span>
<span class="go">         standard_name=&#39;time&#39;, calendar=&#39;gregorian&#39;)</span>
</pre></div>
</div>
<p>A more complex example might require selecting points over an annually repeating
date range. We can select points within a certain part of the year, in this case
between the 15th of July through to the 25th of August. By making use of
PartialDateTime this becomes simple:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">st_swithuns_daterange</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">time</span><span class="o">=</span><span class="k">lambda</span> <span class="n">cell</span><span class="p">:</span> <span class="n">PartialDateTime</span><span class="p">(</span><span class="n">month</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">cell</span> <span class="o">&lt;</span> <span class="n">PartialDateTime</span><span class="p">(</span><span class="n">month</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">25</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">within_st_swithuns</span> <span class="o">=</span> <span class="n">long_ts</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="n">st_swithuns_daterange</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">within_st_swithuns</span><span class="o">.</span><span class="n">coord</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">))</span>
<span class="go">DimCoord([2007-07-16 00:00:00, 2007-07-23 00:00:00, 2007-07-30 00:00:00,</span>
<span class="go">       2007-08-06 00:00:00, 2007-08-13 00:00:00, 2007-08-20 00:00:00,</span>
<span class="go">       2008-07-21 00:00:00, 2008-07-28 00:00:00, 2008-08-04 00:00:00,</span>
<span class="go">       2008-08-11 00:00:00, 2008-08-18 00:00:00, 2009-07-20 00:00:00,</span>
<span class="go">       2009-07-27 00:00:00, 2009-08-03 00:00:00, 2009-08-10 00:00:00,</span>
<span class="go">       2009-08-17 00:00:00, 2009-08-24 00:00:00], standard_name=&#39;time&#39;, calendar=&#39;gregorian&#39;)</span>
</pre></div>
</div>
<p>Notice how the dates printed are between the range specified in the <code class="docutils literal notranslate"><span class="pre">st_swithuns_daterange</span></code>
and that they span multiple years.</p>
</div>
</div>
<div class="section" id="strict-loading">
<h2>Strict loading<a class="headerlink" href="#strict-loading" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../generated/api/iris.html#iris.load_cube" title="iris.load_cube"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.load_cube()</span></code></a> and <a class="reference internal" href="../generated/api/iris.html#iris.load_cubes" title="iris.load_cubes"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.load_cubes()</span></code></a> functions are
similar to <a class="reference internal" href="../generated/api/iris.html#iris.load" title="iris.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.load()</span></code></a> except they can only return
<em>one cube per constraint</em>.
The <a class="reference internal" href="../generated/api/iris.html#iris.load_cube" title="iris.load_cube"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.load_cube()</span></code></a> function accepts a single constraint and
returns a single cube. The <a class="reference internal" href="../generated/api/iris.html#iris.load_cubes" title="iris.load_cubes"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.load_cubes()</span></code></a> function accepts any
number of constraints and returns a list of cubes (as an <cite>iris.cube.CubeList</cite>).
Providing no constraints to <a class="reference internal" href="../generated/api/iris.html#iris.load_cube" title="iris.load_cube"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.load_cube()</span></code></a> or <a class="reference internal" href="../generated/api/iris.html#iris.load_cubes" title="iris.load_cubes"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.load_cubes()</span></code></a>
is equivalent to requesting exactly one cube of any type.</p>
<p>A single cube is loaded in the following example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">filename</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">sample_data_path</span><span class="p">(</span><span class="s1">&#39;air_temp.pp&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cube</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load_cube</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">cube</span><span class="p">)</span>
<span class="go">air_temperature / (K)                 (latitude: 73; longitude: 96)</span>
<span class="go">     Dimension coordinates:</span>
<span class="go">          latitude                           x              -</span>
<span class="go">          longitude                          -              x</span>
<span class="gp">...</span>
<span class="go">     Cell methods:</span>
<span class="go">          mean: time</span>
</pre></div>
</div>
<p>However, when attempting to load data which would result in anything other than
one cube, an exception is raised:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">filename</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">sample_data_path</span><span class="p">(</span><span class="s1">&#39;uk_hires.pp&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cube</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load_cube</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">iris.exceptions.ConstraintMismatchError</span>: <span class="n">Expected exactly one cube, found 2.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All the load functions share many of the same features, hence
multiple files could be loaded with wildcard filenames
or by providing a list of filenames.</p>
</div>
<p>The strict nature of <a class="reference internal" href="../generated/api/iris.html#iris.load_cube" title="iris.load_cube"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.load_cube()</span></code></a> and <a class="reference internal" href="../generated/api/iris.html#iris.load_cubes" title="iris.load_cubes"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.load_cubes()</span></code></a>
means that, when combined with constrained loading, it is possible to
ensure that precisely what was asked for on load is given
- otherwise an exception is raised.
This fact can be utilised to make code only run successfully if
the data provided has the expected criteria.</p>
<p>For example, suppose that code needed <code class="docutils literal notranslate"><span class="pre">air_potential_temperature</span></code>
in order to run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">iris</span>
<span class="n">filename</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">sample_data_path</span><span class="p">(</span><span class="s1">&#39;uk_hires.pp&#39;</span><span class="p">)</span>
<span class="n">air_pot_temp</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load_cube</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;air_potential_temperature&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">air_pot_temp</span><span class="p">)</span>
</pre></div>
</div>
<p>Should the file not produce exactly one cube with a standard name of
‘air_potential_temperature’, an exception will be raised.</p>
<p>Similarly, supposing a routine needed both ‘surface_altitude’ and
‘air_potential_temperature’ to be able to run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">iris</span>
<span class="n">filename</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">sample_data_path</span><span class="p">(</span><span class="s1">&#39;uk_hires.pp&#39;</span><span class="p">)</span>
<span class="n">altitude_cube</span><span class="p">,</span> <span class="n">pot_temp_cube</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">load_cubes</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;surface_altitude&#39;</span><span class="p">,</span> <span class="s1">&#39;air_potential_temperature&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>The result of <a class="reference internal" href="../generated/api/iris.html#iris.load_cubes" title="iris.load_cubes"><code class="xref py py-func docutils literal notranslate"><span class="pre">iris.load_cubes()</span></code></a> in this case will be a list of 2 cubes
ordered by the constraints provided. Multiple assignment has been used to put
these two cubes into separate variables.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In Python, lists of a pre-known length and order can be exploited
using <em>multiple assignment</em>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">number_one</span><span class="p">,</span> <span class="n">number_two</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">number_one</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">number_two</span><span class="p">)</span>
<span class="go">2</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="saving_iris_cubes.html" class="btn btn-neutral float-right" title="Saving Iris cubes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="iris_cubes.html" class="btn btn-neutral float-left" title="Iris data structures" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        
        &copy; <a href="../copyright.html">Copyright</a> Iris Contributors

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>