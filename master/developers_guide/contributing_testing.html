

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Test categories &mdash; Iris 3.0.dev0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/theme_override.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-dataframe.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Graphics tests" href="contributing_graphics_tests.html" />
    <link rel="prev" title="Testing" href="contributing_testing_index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/iris-logo-title.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
    
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installing.html">Installing Iris</a></li>
<li class="toctree-l1"><a class="reference internal" href="../generated/gallery/index.html">Gallery</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userguide/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/iris_cubes.html">Iris data structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/loading_iris_cubes.html">Loading Iris cubes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/saving_iris_cubes.html">Saving Iris cubes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/navigating_a_cube.html">Navigating a cube</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/subsetting_a_cube.html">Subsetting a Cube</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/real_and_lazy_data.html">Real and Lazy Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/plotting_a_cube.html">Plotting a cube</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/interpolation_and_regridding.html">Cube interpolation and regridding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/merge_and_concat.html">Merge and concatenate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/cube_statistics.html">Cube statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/cube_maths.html">Basic cube mathematics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/citation.html">Citing Iris</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/code_maintenance.html">Code maintenance</a></li>
</ul>
<p class="caption"><span class="caption-text">Developers Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="contributing_getting_involved.html">Getting Involved</a></li>
<li class="toctree-l1"><a class="reference internal" href="gitwash/index.html">Working with <em>iris</em> source code</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing_documentation.html">Contributing to the documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="contributing_codebase_index.html">Contributing to the code base</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="contributing_code_formatting.html">Code formatting</a></li>
<li class="toctree-l2"><a class="reference internal" href="documenting/docstrings.html">Docstrings</a></li>
<li class="toctree-l2"><a class="reference internal" href="documenting/rest_guide.html">reST quick start</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing_deprecations.html">Deprecations</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="contributing_testing_index.html">Testing</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Test categories</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#unit-tests">Unit tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="#integration-tests">Integration tests</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contributing_graphics_tests.html">Graphics tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing_running_tests.html">Running the tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing_ci_tests.html">Continuous Integration (CI) Testing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing_changes.html">Contributing your changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="release.html">Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../generated/api/iris.html">Iris API</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew/index.html">What’s new in Iris</a></li>
<li class="toctree-l1"><a class="reference internal" href="../techpapers/index.html">Iris Technical Papers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">Iris copyright, licensing and contributors</a></li>
</ul>

            
          

    
    
    
        <p class="caption">
            <span class="caption-text">
            
                Support
            
            </span>
        </p>
        <ul>
            
                <li class="toctree-l1"><a href="https://github.com/SciTools/iris"><i class="fa fa-github fa-fw"></i> Source Code</a></li>
            
                <li class="toctree-l1"><a href="https://groups.google.com/forum/#!forum/scitools-iris"><i class="fa fa-comments fa-fw"></i> Users Google Group</a></li>
            
                <li class="toctree-l1"><a href="https://groups.google.com/forum/#!forum/scitools-iris-dev"><i class="fa fa-comments fa-fw"></i> Developers Google Group</a></li>
            
                <li class="toctree-l1"><a href="https://stackoverflow.com/questions/tagged/python-iris"><i class="fa fa-question fa-fw"></i> StackOverflow For "How do I?"</a></li>
            
                <li class="toctree-l1"><a href="https://scitools.org.uk/iris/docs/v2.4.0/index.html"><i class="fa fa-book fa-fw"></i> Legacy documentation</a></li>
            
        </ul>
    

        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Iris</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="contributing_codebase_index.html">Contributing to the code base</a> &raquo;</li>
        
          <li><a href="contributing_testing_index.html">Testing</a> &raquo;</li>
        
      <li>Test categories</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/developers_guide/contributing_testing.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="test-categories">
<span id="developer-test-categories"></span><h1>Test categories<a class="headerlink" href="#test-categories" title="Permalink to this headline">¶</a></h1>
<p>There are two main categories of tests within Iris:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#testing-unit-test"><span class="std std-ref">Unit tests</span></a></p></li>
<li><p><a class="reference internal" href="#testing-integration"><span class="std std-ref">Integration tests</span></a></p></li>
</ul>
</div></blockquote>
<p>Ideally, all code changes should be accompanied by one or more unit
tests, and by zero or more integration tests.</p>
<p>But if in any doubt about what tests to add or how to write them please
feel free to submit a pull-request in any state and ask for assistance.</p>
<div class="section" id="unit-tests">
<span id="testing-unit-test"></span><h2>Unit tests<a class="headerlink" href="#unit-tests" title="Permalink to this headline">¶</a></h2>
<p>Code changes should be accompanied by enough unit tests to give a
high degree of confidence that the change works as expected. In
addition, the unit tests can help describe the intent behind a change.</p>
<p>The docstring for each test module must state the unit under test.
For example:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">&quot;&quot;&quot;Unit</span> <span class="pre">tests</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">`iris.experimental.raster.export_geotiff`</span> <span class="pre">function.&quot;&quot;&quot;</span></code></p>
</div></blockquote>
<p>All unit tests must be placed and named according to the following
structure:</p>
<div class="section" id="classes">
<span id="testing-classes"></span><h3>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h3>
<p>When testing a class all the tests must reside in the module:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">lib/iris/tests/unit/&lt;fully/qualified/module&gt;/test_&lt;ClassName&gt;.py</span></code></p>
</div></blockquote>
<p>Within this test module each tested method must have one or more
corresponding test classes, for example:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Test_&lt;name</span> <span class="pre">of</span> <span class="pre">public</span> <span class="pre">method&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Test_&lt;name</span> <span class="pre">of</span> <span class="pre">public</span> <span class="pre">method&gt;__&lt;aspect</span> <span class="pre">of</span> <span class="pre">method&gt;</span></code></p></li>
</ul>
<p>And within those test classes, the test methods must be named according
to the aspect of the tested method which they address.</p>
<p><strong>Examples</strong>:</p>
<p>All unit tests for <a class="reference internal" href="../generated/api/iris/cube.html#iris.cube.Cube" title="iris.cube.Cube"><code class="xref py py-class docutils literal notranslate"><span class="pre">iris.cube.Cube</span></code></a> must reside in:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">lib/iris/tests/unit/cube/test_Cube.py</span></code></p>
</div></blockquote>
<p>Within that file the tests might look something like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tests for the Cube.xml() method.</span>
<span class="k">class</span> <span class="nc">Test_xml</span><span class="p">(</span><span class="n">tests</span><span class="o">.</span><span class="n">IrisTest</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_some_general_stuff</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

<span class="c1"># Tests for the Cube.xml() method, focussing on the behaviour of</span>
<span class="c1"># the checksums.</span>
<span class="k">class</span> <span class="nc">Test_xml__checksum</span><span class="p">(</span><span class="n">tests</span><span class="o">.</span><span class="n">IrisTest</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_checksum_ignores_masked_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

<span class="c1"># Tests for the Cube.add_dim_coord() method.</span>
<span class="k">class</span> <span class="nc">Test_add_dim_coord</span><span class="p">(</span><span class="n">tests</span><span class="o">.</span><span class="n">IrisTest</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_normal_usage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">test_coord_already_present</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="functions">
<span id="testing-functions"></span><h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<p>When testing a function all the tests must reside in the module:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">lib/iris/tests/unit/&lt;fully/qualified/module&gt;/test_&lt;function_name&gt;.py</span></code></p>
</div></blockquote>
<p>Within this test module there must be one or more test classes, for example:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Test</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TestAspectOfFunction</span></code></p></li>
</ul>
<p>And within those test classes, the test methods must be named according
to the aspect of the tested function which they address.</p>
<p><strong>Examples</strong>:</p>
<p>All unit tests for <code class="xref py py-func docutils literal notranslate"><span class="pre">iris.experimental.raster.export_geotiff()</span></code>
must reside in:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">lib/iris/tests/unit/experimental/raster/test_export_geotiff.py</span></code></p>
</div></blockquote>
<p>Within that file the tests might look something like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tests focussing on the handling of different data types.</span>
<span class="k">class</span> <span class="nc">TestDtypeAndValues</span><span class="p">(</span><span class="n">tests</span><span class="o">.</span><span class="n">IrisTest</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_int16</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">test_int16_big_endian</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

<span class="c1"># Tests focussing on the handling of different projections.</span>
<span class="k">class</span> <span class="nc">TestProjection</span><span class="p">(</span><span class="n">tests</span><span class="o">.</span><span class="n">IrisTest</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_no_ellipsoid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="integration-tests">
<span id="testing-integration"></span><h2>Integration tests<a class="headerlink" href="#integration-tests" title="Permalink to this headline">¶</a></h2>
<p>Some code changes may require tests which exercise several units in
order to demonstrate an important consequence of their interaction which
may not be apparent when considering the units in isolation.</p>
<p>These tests must be placed in the <code class="docutils literal notranslate"><span class="pre">lib/iris/tests/integration</span></code> folder.
Unlike unit tests, there is no fixed naming scheme for integration
tests. But folders and files must be created as required to help
developers locate relevant tests. It is recommended they are named
according to the capabilities under test, e.g.
<code class="docutils literal notranslate"><span class="pre">metadata/test_pp_preservation.py</span></code>, and not named according to the
module(s) under test.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="contributing_graphics_tests.html" class="btn btn-neutral float-right" title="Graphics tests" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="contributing_testing_index.html" class="btn btn-neutral float-left" title="Testing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        
        &copy; <a href="../copyright.html">Copyright</a> Iris Contributors

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>