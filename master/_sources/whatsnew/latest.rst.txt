What's New in Iris <interim>
****************************

:Release: <interim>
:Date: <unreleased>

This document explains the new/changed features of Iris in version <interim>
(:doc:`View all changes <index>`.)

Iris <interim> Features
=======================
* New coordinate system: :class:`iris.coord_systems.Geostationary`, based on
the `CF Geostationary projection definition <http://cfconventions
.org/cf-conventions/cf-conventions.html#_geostationary_projection>`_.
* :class:`iris.coord_systems.VerticalPerspective` can now be saved to and
loaded from NetCDF files.

----

* Support for loading, storing and saving of NetCDF climatological coordinates.
Stored as a boolean property - ``climatological`` - of the relevant
cube coordinate.

----

* :class:`iris.experimental.regrid.PointInCell` moved to
:class:`iris.analysis.PointInCell` to make this regridding scheme public

----

* Iris now supports standard name modifiers. See `Appendix C, Standard Name Modifiers <http://cfconventions.org/Data/cf-conventions/cf-conventions-1.7/cf-conventions.html#standard-name-modifiers>`_ for more information.

----

* :meth:`iris.cube.Cube.remove_cell_measure` now also allows removal of a cell
measure by its name (previously only accepted a CellMeasure object).

----

* Iris now makes better choices of dask chunk sizes, when loading from netcdf
  files:  If a file variable has specified, small chunks, Iris will now choose
  dask chunks which are a multiple of these, up to a default target size.
  This is particularly relevant to files with an unlimited dimension, which
  previously could produce a large number of small chunks.
  In addition, Iris now takes its default chunksize from the default configured
  in dask itself, i.e. `dask.config.get('array.chunk-size')`.

----


Bugs Fixed
==========
* :class:`iris.coord_systems.VerticalPerspective` coordinate system now uses
the `CF Vertical perspective definition <http://cfconventions
.org/cf-conventions/cf-conventions.html#vertical-perspective>`_; had been
erroneously using Geostationary.

----

* :class:`~iris.coords.CellMethod` will now only use valid `NetCDF name tokens <https://www.unidata.ucar.edu/software/netcdf/docs/netcdf_data_set_components.html#object_name>`_ to reference the coordinates involved in the statistical operation.

----

* :attr:`~iris.aux_factory.AuxCoordFactory.var_name`, :attr:`~iris.coords.CellMeasure.var_name`, :attr:`~iris.coords.Coord.var_name`, :attr:`~iris.coords.AuxCoord.var_name` and :attr:`~iris.cube.Cube.var_name` will now only use valid `NetCDF name tokens <https://www.unidata.ucar.edu/software/netcdf/docs/netcdf_data_set_components.html#object_name>`_ to reference the said NetCDF variable name. Note that, names with a leading inderscore are not permitted.

----

* Variables which reference themselves in ``cell_measures`` can now be read.

----

* The name of cubes loaded from abf/abl files has been corrected.

----

* :meth:`iris.cube.Cube.collapsed` now handles partial collapsing of
multidimensional coordinates that have bounds.

----

* :meth:`iris.cube.Cube.aggregated_by` now gives correct values in points and
bounds when handling multidimensional coordinates.

----


Documentation Changes
=====================
* Added a gallery example showing how to concatenate NEMO ocean model data.

----

